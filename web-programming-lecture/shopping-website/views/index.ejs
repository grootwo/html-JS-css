<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title><%= title %></title>
  <link rel="stylesheet" href="/stylesheets/style.css">
  <style>
    .featured-slide {
      display: none;
      justify-content: center;
      gap: 20px;
      flex-direction: row;
    }
    .featured-slide.active {
      display: flex;
    }
  </style>

  <!-- ê°€ë¡œë¡œ 2ê°œì”© 3ì´ˆ ê°„ê²©ìœ¼ë¡œ ì¶”ì²œ ëª©ë¡ ë³´ì´ê¸° -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const slides = document.querySelectorAll('.featured-slide');
      let current = 0;

      function showSlide(index) {
        slides.forEach((slide, i) => {
          slide.classList.remove('active');
          if (i === index) {
            slide.classList.add('active');
          }
        });
      }

      showSlide(current); // ìµœì´ˆ 1ë²ˆ ë³´ì—¬ì£¼ê¸°

      setInterval(() => {
        current = (current + 1) % slides.length;
        showSlide(current);
      }, 3000);
    });
  </script>

  <!-- ë°°ë„ˆ ë°‘ì— ì•„ë˜ ë‚´ìš©ì„ 3ì´ˆ ë‹¨ìœ„ë¡œ ë³´ì´ê¸° -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const phrases = [
        "ğŸ“ ì˜¤ëŠ˜ì˜ ì‹ ì„ í•œ ê³¼ì¼ì„ ë§Œë‚˜ë³´ì„¸ìš”!",
        "ğŸŒ ì¸ê¸° ë§ì€ ê³¼ì¼ì„ ì§€ê¸ˆ í™•ì¸í•´ë³´ì„¸ìš”!",
        "ğŸŠ ë‹¬ì½¤í•œ ì˜¤ë Œì§€, ë¬´ë£Œë°°ì†¡ ì¤‘!",
        "ğŸ‡ í¬ë„ë¡œ ê±´ê°• ì±™ê¸°ì„¸ìš”!",
        "ğŸ¥ í•œì • ìˆ˜ëŸ‰ íŠ¹ê°€! ì§€ê¸ˆ ì£¼ë¬¸í•˜ë©´ ë‚´ì¼ ë„ì°©! ì‹ ì„ í•¨ì„ ë¹ ë¥´ê²Œ!",
        "ğŸ ê³¼ì¼ í•œì…ì— ê¸°ë¶„ê¹Œì§€ ìƒí¼í•´ì ¸ìš”!"
      ];

      const bannerText = document.getElementById("banner-text");
      let current = 0;

      setInterval(() => {
        current = (current + 1) % phrases.length;
        bannerText.textContent = phrases[current];
      }, 3000); // 3ì´ˆ ê°„ê²©
    });
  </script>

</head>
<body>
<!-- index.ejs ìƒë‹¨ì— ì¶”ê°€ ë¡œê·¸ì¸/íšŒì›ê°€ì…  -->
<header style="display: flex; justify-content: flex-end; padding: 10px;">
    <% if (!user) { %>
        <a href="/login" style="color: #fff; background-color: #facc15; padding: 6px 12px; border-radius: 5px; text-decoration: none;">ë¡œê·¸ì¸</a>
        <a href="/user/register" style="color: #fff; background-color: #facc15; padding: 6px 12px; border-radius: 5px; text-decoration: none;">íšŒì›ê°€ì…</a>
     <% } else { %>
        <span style="margin-right: 10px;"><%= user.username %>ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</span>
        <a href="/user/logout" style="color: #fff; background-color: #ef4444; padding: 6px 12px; border-radius: 5px; text-decoration: none;">ë¡œê·¸ì•„ì›ƒ</a>
    <% } %>
</header>
<hr>

<header>
  <h1>ğŸ›ï¸ <%= title %></h1>
  <nav>
    <a href="/">í™ˆ</a>
    <a href="/products">ìƒí’ˆëª©ë¡</a>
    <a href="/cart">ì¥ë°”êµ¬ë‹ˆ</a>
    <a href="/board">ê³ ê°ì„¼í„°</a> <!-- âœ… ì¶”ê°€ -->
  </nav>
</header>

<section >
    <div class="banner" style="text-align: left;">
<!--        <img src="<%= featuredProducts[0]?.image || '/images/default.png' %>"
             alt="<%= featuredProducts[0]?.name || 'ì¶”ì²œ ê³¼ì¼' %>"
             style="width:100%; border-radius:10px;">
-->        <img src="/images/default.png"
             alt="ì¶”ì²œ ê³¼ì¼"
             style="width:10%; border-radius:10px;">
           <div id="banner-text"
                style="margin-top: 15px; font-size: 1.2em; color: #333;">
               ğŸ“ ì˜¤ëŠ˜ì˜ ì‹ ì„ í•œ ê³¼ì¼ì„ ë§Œë‚˜ë³´ì„¸ìš”!
           </div>

    </div>
</section>
    <div>
        <h2 style="text-align: center;margin-top:30px; font-size:1.3em;">
            ğŸ‡ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê³¼ì¼ ë§Œë‚˜ë³´ì„¸ìš” ğŸŠ
        </h2>

    </div>

<section>
    <div style="margin-top:60px; text-align:center; ">
        <a href="/products" class="shop-now-btn">ë°”ë¡œ ì‡¼í•‘í•˜ê¸° â†’</a>
    </div>
</section>

<main>
  <h2 style="text-align: center; font-size: 1.5em; margin-top: 20px;">ğŸ”¥ ì¸ê¸° ìƒí’ˆ</h2>

    <!-- ğŸ”§ 3. 2ê°œ ìƒí’ˆì„ 3ì´ˆ ê°„ê²©ìœ¼ë¡œ ìŠ¬ë¼ì´ë“œë¡œ í‘œì‹œ -->
    <div id="featured-container">
      <% for (let i = 0; i < featuredProducts.length; i += 2) { %>
        <div class="featured-slide <%= i === 0 ? 'active' : '' %>">
          <% for (let j = i; j < i + 2 && j < featuredProducts.length; j++) { %>
            <div class="product-card">
          <!--    <img src="<%= featuredProducts[j].image %>" alt="<%= featuredProducts[j].name %>"> -->
              <img src="/images/<%= featuredProducts[j].image || 'default.png' %>"
                   alt="<%= featuredProducts[j].name %>"
                   style="width: 120px; height: 120px; object-fit: cover;">
                <h3><%= featuredProducts[j].emoji %> <%= featuredProducts[j].name %></h3>
              <p><%= featuredProducts[j].description %></p>
              <strong>â‚©<%= featuredProducts[j].price.toLocaleString() %></strong>

              <form action="/cart/add" method="POST">
                <input type="hidden" name="productId" value="<%= featuredProducts[j].id %>">
                <button type="submit" class="cart-button">ğŸ›’ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
              </form>
            </div>
          <% } %>
        </div>
      <% } %>
    </div>

</main>

<footer>
  <p>&copy; 2025 ì‡¼í•‘ëª° ì˜ˆì‹œ. All rights reserved.</p>
</footer>
</body>
</html>
